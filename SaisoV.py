from WLS import wls
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
# from matplotlib.pylab import rcParams
from caseTN2 import caseTN
from pypower.api import ppoption, runpf
import matplotlib.pyplot as plt
from sklearn.ensemble import RandomForestRegressor
from sklearn.model_selection import train_test_split
from keras.models import Sequential, load_model
from keras.layers import Dense, Activation
from keras import optimizers
from matplotlib.pylab import rcParams
import time

rcParams['figure.figsize'] = 15, 5
nbus=41
#====================================chuagiam

# ssV_MLP = [1,0.080039642,0.08897588,0.092110065,0.090987874,0.06768675,0.079954796,0.184528214,0.070425451,0.083786375,0.023185371,0.073711638,0.079735287,0.077296221,0.085843823,0.062137373,0.071342222,0.068580606,0.067176802,0.085703645,0.093442483,0.092853554,0.037198737,0.002640223,0.178591244,0.169233219,0.072825628,0.087699562,0.077563096,0.100825574,0.086398893,0.09272094,0.130045135,0.229096339,0.337749074,0.342787304,0.151527572,0.004428658,0.046730957,0.13277437,0.166036406]
# ssV_RFR = [1,0.0000,0.0004,0.0004,0.0004,0.0004,0.0000,0.0046,0.0003,0.0000,0.0021,0.0000,0.0004,0.0005,0.0000,0.0001,0.0001,0.0001,0.0040,0.0040,0.0000,0.0000,0.0031,0.0009,0.0811,0.0811,0.0000,0.0000,0.0003,0.0833,0.0000,0.0004,0.0021,0.0823,0.0783,0.0890,0.0035,0.0024,0.0078,0.0030,0.0027]
# ssV_WLS = [1,0.0577,0.0591,0.0591,0.0591,0.0591,0.0554,0.0560,0.0022,0.0019,0.0006,0.0000,0.0017,0.0011,0.0000,0.0129,0.0129,0.0060,0.0040,0.0040,0.0011,0.0011,0.0083,0.0677,0.0080,0.0080,0.0793,0.0793,0.0636,0.0005,0.0586,0.0590,0.0700,0.0082,0.0085,0.0005,0.0022,0.0022,0.0007,0.0041,0.0019]
#====================================25%
# ssV_MLP = [0,0.0996,0.1228,0.1099,0.1127,0.1099,0.0962,0.0771,0.1180,0.1063,0.2411,0.1032,0.1155,0.1448,0.0986,0.1448,0.1143,0.1011,0.0948,0.1103,0.1026,0.1002,0.2016,0.1764,0.0208,0.0215,0.1098,0.1033,0.1067,0.0720,0.1086,0.1043,0.3860,0.0152,0.1107,0.1083,0.0952,0.0462,0.0233,0.0760,0.1675]
# ssV_RFR = [0,0.0000,0.0004,0.0004,0.0004,0.0004,0.0000,0.0046,0.0003,0.0000,0.0022,0.0000,0.0004,0.0006,0.0000,0.0001,0.0002,0.0001,0.0040,0.0040,0.0000,0.0000,0.0032,0.0010,0.0811,0.0811,0.0000,0.0000,0.0004,0.0822,0.0000,0.0004,0.0024,0.0822,0.0781,0.0822,0.0035,0.0025,0.0079,0.0030,0.0066]
# ssV_WLS = [0,0.0577,0.0591,0.0591,0.0591,0.0591,0.0554,0.0560,0.0022,0.0019,0.0006,0.0000,0.0017,0.0011,0.0000,0.0129,0.0129,0.0060,0.0040,0.0040,0.0011,0.0011,0.0083,0.0677,0.0080,0.0080,0.0793,0.0793,0.0636,0.0005,0.0586,0.0590,0.0700,0.0082,0.0085,0.0005,0.0022,0.0022,0.0007,0.0041,0.0019]
#====================================50%
# ssV_MLP = [0,0.0996,0.1228,0.1099,0.1127,0.1099,0.0962,0.0771,0.1180,0.1063,0.2411,0.1032,0.1155,0.1448,0.0986,0.1448,0.1143,0.1011,0.0948,0.1103,0.1026,0.1002,0.2016,0.1764,0.0208,0.0215,0.1098,0.1033,0.1067,0.0720,0.1086,0.1043,0.3860,0.0152,0.1107,0.1083,0.0952,0.0462,0.0233,0.0760,0.1675]
# ssV_RFR = [0,0.0000,0.0004,0.0004,0.0004,0.0004,0.0000,0.0046,0.0003,0.0000,0.0022,0.0000,0.0004,0.0006,0.0000,0.0001,0.0002,0.0001,0.0040,0.0040,0.0000,0.0000,0.0032,0.0010,0.0811,0.0811,0.0000,0.0000,0.0004,0.0822,0.0000,0.0004,0.0024,0.0822,0.0781,0.0822,0.0035,0.0025,0.0079,0.0030,0.0066]
# ssV_WLS = [0,0.0577,0.0591,0.0591,0.0591,0.0591,0.0554,0.0560,0.0022,0.0019,0.0006,0.0000,0.0017,0.0011,0.0000,0.0129,0.0129,0.0060,0.0040,0.0040,0.0011,0.0011,0.0083,0.0677,0.0080,0.0080,0.0793,0.0793,0.0636,0.0005,0.0586,0.0590,0.0700,0.0082,0.0085,0.0005,0.0022,0.0022,0.0007,0.0041,0.0019]
#====================================25% 50%data
ssV_RFR = [0,0.0000,0.0004,0.0004,0.0004,1.0004,1.0000,3.0002,2.0003,0.0000,1.0018,0.0000,1.0003,0.0004,0.0000,0.0003,0.0003,0.0001,0.0040,0.0040,0.0000,0.0000,0.0023,0.0005,0.0823,0.0823,0.0000,0.0000,0.0003,1.1329,0.0000,0.0004,0.0012,0.0843,2.2114,3.3285,0.0014,0.0025,0.0051,0.0041,0.0017]
ssV_MLP = [0,0.2434,0.2609,0.2483,0.2293,1.2512,2.2591,4.1338,3.2859,0.2534,1.2553,0.2296,2.2248,0.2300,0.2814,0.2114,0.2359,0.2161,0.2259,0.2975,0.2657,0.2449,0.2790,0.2386,0.4102,0.3482,0.2753,0.2765,0.2290,1.4390,0.2695,0.2387,0.2743,0.3521,2.3527,5.8558,0.2487,0.3349,0.2832,0.2458,0.1693]
ssV_WLS = [0,0.0577,0.0591,0.0591,0.0591,0.0591,0.0554,0.0560,0.0022,0.0019,0.0006,0.0000,0.0017,0.0011,0.0000,0.0129,0.0129,0.0060,0.0040,0.0040,0.0011,0.0011,0.0083,0.0677,0.0080,0.0080,0.0793,0.0793,0.0636,0.0005,0.0586,0.0590,0.0700,0.0082,0.0085,0.0005,0.0022,0.0022,0.0007,0.0041,0.0019]
i = np.ones((41, 1), dtype=int)
for n in range(41):
    i[n] = n+1



plt.plot(i, ssV_MLP, 'bo-', label='MLP')
plt.plot(i, ssV_RFR, 'yo-', label='RFR')
plt.plot(i, ssV_WLS, 'go-', label='WLS')
# plt.title('Sai số góc pha của của lưới Tây Ninh')
plt.xlabel('Bus')
plt.ylabel('Error (%)')
plt.legend(loc='best')
plt.show()