from WLS import wls
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
# from matplotlib.pylab import rcParams
from caseTN2 import caseTN
from pypower.api import ppoption, runpf
import matplotlib.pyplot as plt
from sklearn.ensemble import RandomForestRegressor
from sklearn.model_selection import train_test_split
from keras.models import Sequential, load_model
from keras.layers import Dense, Activation
from keras import optimizers
from matplotlib.pylab import rcParams
import time

rcParams['figure.figsize'] = 15, 5
nbus=41
#====================================chuagiam
# ssA_MLP = [0.0005,0.0183,0.0202,0.0188,0.0248,0.0238,0.1528,0.0206,0.0088,0.0084,0.0222,0.0006,0.0167,0.0199,0.0001,0.0059,0.0046,0.0001,0.0124,0.0101,0.0130,0.0084,0.0469,0.0152,0.0152,0.0106,0.0123,0.0164,0.0178,0.0102,0.0105,0.0242,0.0838,0.1497,0.0612,0.1586,0.0761,0.0800,0.1066,0.0340,0.1504]
# ssA_RFR = [0.0000,0.0030,0.0030,0.0030,0.0030,0.0030,0.0074,0.0012,0.0010,0.0010,0.0000,0.0000,0.0008,0.0002,0.0000,0.0003,0.0003,0.0003,0.0134,0.0134,0.0146,0.0146,0.0110,0.0033,0.0229,0.0229,0.0029,0.0029,0.0021,0.0218,0.0022,0.0030,0.0090,0.0119,0.0251,0.0166,0.0022,0.0043,0.0026,0.0128,0.0119]
# ssA_WLS = [0.0000,0.0179,0.0170,0.0170,0.0170,0.0170,0.0159,0.0143,0.0008,0.0008,0.0004,0.0000,0.0005,0.0003,0.0000,0.0044,0.0044,0.0181,0.0187,0.0187,0.0196,0.0196,0.0165,0.0199,0.0089,0.0089,0.0251,0.0251,0.0188,0.0096,0.0180,0.0170,0.0162,0.0083,0.0081,0.0095,0.0010,0.0010,0.0005,0.0188,0.0245]
#====================================25%
# ssA_MLP = [0.00632,0.00386,0.00424,0.00337,0.00364,0.00434,0.05562,0.01870,0.00445,0.00530,0.00367,0.00291,0.00307,0.00263,0.00198,0.00767,0.01474,0.01086,0.00000,0.00478,0.00936,0.00888,0.00845,0.00885,0.01323,0.01296,0.01182,0.00873,0.00656,0.03290,0.01031,0.00325,0.01566,0.02000,0.08269,0.04498,0.05463,0.05211,0.03170,0.01473,0.00780]
# ssA_RFR = [0.00000,0.00306,0.00303,0.00303,0.00304,0.00304,0.00736,0.00280,0.00102,0.00102,0.00005,0.00000,0.00082,0.00018,0.00000,0.00024,0.00024,0.00030,0.00340,0.00340,0.01460,0.01460,0.01137,0.00337,0.02292,0.02292,0.00285,0.00285,0.00214,0.02157,0.00228,0.00303,0.00914,0.01145,0.01520,0.01490,0.00172,0.00437,0.00293,0.01314,0.01116]
# ssA_WLS = [0.00000,0.01790,0.01697,0.01698,0.01697,0.01697,0.01589,0.01430,0.00083,0.00083,0.00041,0.00001,0.00050,0.00025,0.00000,0.00445,0.00443,0.01811,0.01869,0.01869,0.01959,0.01959,0.01654,0.01990,0.00888,0.00888,0.02509,0.02509,0.01880,0.00960,0.01801,0.01697,0.01623,0.00834,0.00809,0.00952,0.00097,0.00101,0.00048,0.01883,0.02449]
#====================================50%
# ssA_MLP = [0.000146292,0.02298092,0.02062974,0.02061686,0.02094429,0.02091143,0.01658624,0.0755024,0.00043899,0.00094183,0.00638824,1.53503E-06,0.00163291,0.001341286,0.000115332,0.00634627,0.01875223,0.001585565,0.011695358,0.012283498,0.011098002,0.015541205,0.00028298,0.01872161,0.04011624,0.03942758,0.02731969,0.02754959,0.02427265,0.045595,0.0126136,0.02108562,0.1178437,0.0648165,0.04032,0.0969214,0.03514348,0.02342576,0.10038067,0.04660501,0.00033464]
# ssA_RFR = [0,0.00305687,0.00302581,0.00303516,0.00303585,0.0030358,0.00737687,0.0028576,0.00101783,0.00101782,0.00033961,2.01971E-06,0.0008327,0.000267546,8.759E-07,0.0002378,0.00024232,0.000295436,0.013401756,0.013401789,0.01460295,0.014602977,0.01133243,0.00336446,0.02291844,0.02291838,0.00285258,0.00285275,0.00214255,0.0215557,0.00229178,0.00303089,0.009107,0.011496,0.0149538,0.0148559,0.00169878,0.00443121,0.00040839,0.0131116,0.01100897]
# ssA_WLS = [0,0.01789755,0.01697461,0.01697708,0.01697171,0.01697172,0.01588547,0.0143045,0.00082891,0.00082895,0.00040778,5.07672E-06,0.0005048,0.000250132,9.449E-07,0.00444799,0.00442922,0.018111438,0.018689995,0.018689963,0.019594499,0.0195945,0.01654281,0.01989872,0.00888492,0.00888485,0.02508635,0.02508631,0.0187955,0.0095974,0.01801472,0.01696665,0.0162329,0.0083394,0.0080903,0.0095247,0.00097439,0.00100563,0.00047861,0.01882672,0.02449132]
#====================================25% 50%data
ssA_MLP = [0,0.21105414,0.25792657,0.21745695,0.26205233,0.22507074,0.32356064,0.3093122,0.26693544,0.27157168,0.20328393,0.034464292,0.26251865,0.239067529,0.033959572,0.25466788,0.26145496,0.051865213,0.186127097,0.281400636,0.30375602,0.208093352,0.18186691,0.28992362,0.28900331,0.22163133,0.26502056,0.30369485,0.2747128,0.2481385,0.25104011,0.26088915,0.2985491,0.3144244,0.2316785,0.2533474,0.21570027,0.24915998,0.28969024,0.31424151,0.27788652]
ssA_RFR = [0,0.25162147,0.25064115,0.2569561,0.25426186,0.25103949,0.25909378,0.26162391,0.24989404,0.24981685,0.24937299,0.009406603,0.25350496,0.252681636,0.013020155,0.25216535,0.2480639,0.047943676,0.267057178,0.262956358,0.265455852,0.266094265,0.25984743,0.25018183,0.22907887,0.22647426,0.24976741,0.24656297,0.25328086,0.22950217,0.25492192,0.25083353,0.25458782,0.236924,0.24691159,0.23814923,0.2531429,0.24284958,0.24520083,0.26639616,0.26377929]
ssA_WLS = [0,0.01789755,0.01697461,0.01697708,0.01697171,0.01697172,0.01588547,0.0143045,0.00082891,0.00082895,0.00040778,5.07672E-06,0.0005048,0.000250132,9.449E-07,0.00444799,0.00442922,0.018111438,0.018689995,0.018689963,0.019594499,0.0195945,0.01654281,0.01989872,0.00888492,0.00888485,0.02508635,0.02508631,0.0187955,0.0095974,0.01801472,0.01696665,0.0162329,0.0083394,0.0080903,0.0095247,0.00097439,0.00100563,0.00047861,0.01882672,0.02449132]
i = np.ones((41, 1), dtype=int)
for n in range(41):
    i[n] = n+1



plt.plot(i, ssA_MLP, 'bo-', label='MLP')
plt.plot(i, ssA_RFR, 'yo-', label='RFR')
plt.plot(i, ssA_WLS, 'go-', label='WLS')
# plt.title('Sai số góc pha của của lưới Tây Ninh')
plt.xlabel('Bus')
plt.ylabel('Angle (degree)')
plt.legend(loc='best')
plt.show()